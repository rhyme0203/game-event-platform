<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ëŸ­í‚¤ë¹¤ì“° - ìŠ¬ë¡¯ë¨¸ì‹ </title>
  <link rel="stylesheet" href="../assets/css/common.css">
  <link rel="stylesheet" href="../assets/css/ad-modal.css">
  
  <!-- Google AdSense -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8451876651536601"
       crossorigin="anonymous"></script>
  <style>
    .slot-machine {
      background: linear-gradient(145deg, #2c3e50, #34495e);
      border-radius: 30px;
      padding: 40px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
      max-width: 450px;
      margin: 0 auto;
    }

    .slot-display {
      background: #1a1a1a;
      border-radius: 20px;
      padding: 30px 20px;
      margin-bottom: 30px;
      display: flex;
      justify-content: center;
      gap: 15px;
      box-shadow: inset 0 5px 15px rgba(0, 0, 0, 0.8);
    }

    .slot-reel {
      width: 100px;
      height: 120px;
      background: white;
      border-radius: 15px;
      display: flex;
      flex-direction: column;
      overflow: hidden;
      position: relative;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }

    .slot-symbols {
      display: flex;
      flex-direction: column;
      position: absolute;
      width: 100%;
      transition: transform 0.1s linear;
    }

    .slot-symbol {
      height: 120px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 60px;
      user-select: none;
    }

    .slot-lever {
      width: 60px;
      height: 120px;
      background: linear-gradient(145deg, #e74c3c, #c0392b);
      border-radius: 30px;
      margin: 0 auto 30px;
      position: relative;
      cursor: pointer;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      transition: all 0.2s ease;
    }

    .slot-lever:hover:not(.pulling) {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
    }

    .slot-lever.pulling {
      transform: translateY(20px);
    }

    .slot-lever::before {
      content: 'â¬‡ï¸';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 30px;
    }

    .jackpot-text {
      text-align: center;
      font-size: 1.5em;
      font-weight: 700;
      color: #f1c40f;
      margin-bottom: 20px;
      text-shadow: 0 0 10px rgba(241, 196, 15, 0.5);
    }

    .prize-list {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      padding: 20px;
      margin-top: 20px;
      backdrop-filter: blur(10px);
    }

    .prize-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px;
      color: white;
      font-size: 0.95em;
    }

    .prize-symbols {
      font-size: 24px;
    }

    @media (max-width: 600px) {
      .slot-machine {
        padding: 30px 20px;
      }
      .slot-reel {
        width: 80px;
        height: 100px;
      }
      .slot-symbol {
        height: 100px;
        font-size: 48px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="game-card">
      <h1>ğŸ° ìŠ¬ë¡¯ë¨¸ì‹ </h1>
      <p class="subtitle">3ê°œì˜ ê·¸ë¦¼ì„ ë§ì¶°ë³´ì„¸ìš”!</p>

      <div class="game-area">
        <div class="slot-machine">
          <div class="jackpot-text">ğŸŒŸ JACKPOT ğŸŒŸ</div>
          
          <div class="slot-display">
            <div class="slot-reel">
              <div class="slot-symbols" id="reel1"></div>
            </div>
            <div class="slot-reel">
              <div class="slot-symbols" id="reel2"></div>
            </div>
            <div class="slot-reel">
              <div class="slot-symbols" id="reel3"></div>
            </div>
          </div>

          <div class="slot-lever" id="lever"></div>

          <div class="prize-list">
            <div class="prize-item">
              <span class="prize-symbols">ğŸ’ ğŸ’ ğŸ’</span>
              <span>5,000 í¬ì¸íŠ¸</span>
            </div>
            <div class="prize-item">
              <span class="prize-symbols">ğŸ‹ ğŸ‹ ğŸ‹</span>
              <span>3,000 í¬ì¸íŠ¸</span>
            </div>
            <div class="prize-item">
              <span class="prize-symbols">ğŸŠ ğŸŠ ğŸŠ</span>
              <span>2,000 í¬ì¸íŠ¸</span>
            </div>
            <div class="prize-item">
              <span class="prize-symbols">â­ â­ â­</span>
              <span>1,000 í¬ì¸íŠ¸</span>
            </div>
            <div class="prize-item">
              <span class="prize-symbols">ë™ì¼ 2ê°œ</span>
              <span>500 í¬ì¸íŠ¸</span>
            </div>
          </div>
        </div>
      </div>

      <div class="info-box">
        <p><strong>ê²Œì„ ë°©ë²•</strong></p>
        <p>ë ˆë²„ë¥¼ ë‹¹ê²¨ ìŠ¬ë¡¯ì„ ëŒë¦¬ê³ , ê°™ì€ ê·¸ë¦¼ì„ ë§ì¶”ë©´ í¬ì¸íŠ¸ë¥¼ íšë“í•©ë‹ˆë‹¤!</p>
        <p>3ê°œë¥¼ ëª¨ë‘ ë§ì¶”ë©´ ëŒ€ë°•!</p>
      </div>

      <a href="../index.html" class="back-link">â† ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
    </div>
  </div>

  <!-- ê²°ê³¼ ëª¨ë‹¬ -->
  <div class="result-modal" id="resultModal">
    <div class="result-content">
      <div class="result-icon" id="resultIcon">ğŸ‰</div>
      <div class="result-title" id="resultTitle">ì¶•í•˜í•©ë‹ˆë‹¤!</div>
      <div class="result-prize" id="prizeText"></div>
      <button class="close-button" id="closeBtn">í™•ì¸</button>
    </div>
  </div>

  <!-- ê´‘ê³  ëª¨ë‹¬ -->
  <div class="ad-modal" id="adModal">
    <div class="ad-modal-content">
      <button class="ad-modal-close" onclick="closeAdModalAndSpin()">&times;</button>
      
      <div class="ad-modal-header">
        <div class="ad-modal-title">ğŸ¯ íŠ¹ë³„ ì´ë²¤íŠ¸!</div>
        <div class="ad-modal-subtitle">ëŸ­í‚¤ë¹¤ì“° í”„ë¦¬ë¯¸ì—„ ì„œë¹„ìŠ¤ë¥¼ í™•ì¸í•´ë³´ì„¸ìš”</div>
      </div>
      
      <div class="ad-modal-body">
        <div class="ad-modal-ad">
          <!-- Google AdSense ê´‘ê³  -->
          <ins class="adsbygoogle"
               style="display:block;width:300px;height:250px;"
               data-ad-client="ca-pub-8451876651536601"
               data-ad-slot="5939741579"></ins>
          <div class="ad-modal-ad-placeholder" style="display:none;">
            ê´‘ê³  ë¡œë”© ì¤‘...
          </div>
        </div>
        
        <div class="ad-modal-countdown" id="countdown" style="display:none;">
          <span id="countdownText">5</span>ì´ˆ í›„ ê²Œì„ ì‹œì‘
        </div>
      </div>
      
      <div class="ad-modal-footer">
        <button class="ad-modal-btn ad-modal-btn-primary" onclick="startGame()" id="startGameBtn">
          ê²Œì„ ì‹œì‘í•˜ê¸°
        </button>
        <button class="ad-modal-btn ad-modal-btn-secondary" onclick="skipAd()">
          ê´‘ê³  ê±´ë„ˆë›°ê¸°
        </button>
      </div>
    </div>
  </div>

  <script>
    const symbols = ['ğŸ’', 'ğŸ‹', 'ğŸŠ', 'â­', 'ğŸ‡', 'ğŸ‰', 'ğŸ’', 'ğŸ°'];
    const prizes = {
      'ğŸ’ğŸ’ğŸ’': '5,000 í¬ì¸íŠ¸',
      'ğŸ‹ğŸ‹ğŸ‹': '3,000 í¬ì¸íŠ¸',
      'ğŸŠğŸŠğŸŠ': '2,000 í¬ì¸íŠ¸',
      'â­â­â­': '1,000 í¬ì¸íŠ¸',
      'ğŸ‡ğŸ‡ğŸ‡': '1,000 í¬ì¸íŠ¸',
      'ğŸ‰ğŸ‰ğŸ‰': '1,000 í¬ì¸íŠ¸',
      'ğŸ’ğŸ’ğŸ’': '10,000 í¬ì¸íŠ¸ (JACKPOT!)',
      'ğŸ°ğŸ°ğŸ°': '10,000 í¬ì¸íŠ¸ (JACKPOT!)'
    };

    let isSpinning = false;
    const lever = document.getElementById('lever');
    const resultModal = document.getElementById('resultModal');
    const resultIcon = document.getElementById('resultIcon');
    const resultTitle = document.getElementById('resultTitle');
    const prizeText = document.getElementById('prizeText');
    const closeBtn = document.getElementById('closeBtn');

    // ë¦´ ì´ˆê¸°í™”
    function initReels() {
      for (let i = 1; i <= 3; i++) {
        const reel = document.getElementById(`reel${i}`);
        // ì—¬ëŸ¬ ì‹¬ë³¼ ìƒì„± (ìŠ¤í¬ë¡¤ íš¨ê³¼ìš©)
        for (let j = 0; j < 30; j++) {
          const symbol = document.createElement('div');
          symbol.className = 'slot-symbol';
          symbol.textContent = symbols[Math.floor(Math.random() * symbols.length)];
          reel.appendChild(symbol);
        }
      }
    }

    // ê´‘ê³  ëª¨ë‹¬ í‘œì‹œ
    function showAdModal() {
      console.log('ê´‘ê³  ëª¨ë‹¬ í‘œì‹œ');
      const modal = document.getElementById('adModal');
      modal.classList.add('show');
    }
    
    // ê´‘ê³  ëª¨ë‹¬ ë‹«ê¸°
    function closeAdModal() {
      const modal = document.getElementById('adModal');
      modal.classList.remove('show');
    }
    
    // ê´‘ê³  ëª¨ë‹¬ ë‹«ê³  ìŠ¤í•€ ì‹œì‘
    function closeAdModalAndSpin() {
      console.log('X ë²„íŠ¼ìœ¼ë¡œ ëª¨ë‹¬ ë‹«ê¸°');
      closeAdModal();
      setTimeout(() => {
        if (!isSpinning) {
          spin();
        }
      }, 300);
    }
    
    // ê²Œì„ ì‹œì‘
    function startGame() {
      console.log('ê²Œì„ ì‹œì‘!');
      startCountdown();
    }
    
    // ê´‘ê³  ê±´ë„ˆë›°ê¸°
    function skipAd() {
      console.log('ê´‘ê³  ê±´ë„ˆë›°ê¸°');
      closeAdModal();
      setTimeout(() => {
        if (!isSpinning) {
          spin();
        }
      }, 300);
    }
    
    // ì¹´ìš´íŠ¸ë‹¤ìš´ ì‹œì‘
    function startCountdown() {
      const countdown = document.getElementById('countdown');
      const countdownText = document.getElementById('countdownText');
      const startBtn = document.getElementById('startGameBtn');
      
      countdown.style.display = 'block';
      startBtn.style.display = 'none';
      
      let timeLeft = 5;
      countdownText.textContent = timeLeft;
      
      const timer = setInterval(() => {
        timeLeft--;
        countdownText.textContent = timeLeft;
        
        if (timeLeft <= 0) {
          clearInterval(timer);
          closeAdModal();
          setTimeout(() => {
            if (!isSpinning) {
              spin();
            }
          }, 300);
        }
      }, 1000);
    }

    // ìŠ¬ë¡¯ ëŒë¦¬ê¸°
    function spin() {
      if (isSpinning) return;
      
      isSpinning = true;
      lever.classList.add('pulling');
      
      setTimeout(() => {
        lever.classList.remove('pulling');
      }, 300);

      const results = [];
      const durations = [2000, 2500, 3000];

      for (let i = 1; i <= 3; i++) {
        const reel = document.getElementById(`reel${i}`);
        const duration = durations[i - 1];
        
        // ë¦´ íšŒì „ ì• ë‹ˆë©”ì´ì…˜
        let distance = 0;
        const interval = setInterval(() => {
          distance += 20;
          reel.style.transform = `translateY(-${distance}px)`;
        }, 16);

        setTimeout(() => {
          clearInterval(interval);
          
          // ìµœì¢… ê²°ê³¼ ì‹¬ë³¼ ì„ íƒ
          const finalSymbol = symbols[Math.floor(Math.random() * symbols.length)];
          results.push(finalSymbol);
          
          // ìµœì¢… ìœ„ì¹˜ë¡œ ìŠ¤ëƒ…
          const symbolHeight = 120;
          const finalPosition = Math.floor(distance / symbolHeight) * symbolHeight;
          reel.style.transform = `translateY(-${finalPosition}px)`;
          
          // ìµœì¢… ì‹¬ë³¼ì„ í•´ë‹¹ ìœ„ì¹˜ì— ë°°ì¹˜
          const finalIndex = Math.floor(finalPosition / symbolHeight);
          if (reel.children[finalIndex]) {
            reel.children[finalIndex].textContent = finalSymbol;
          }
          
          if (i === 3) {
            setTimeout(() => {
              checkResults(results);
            }, 500);
          }
        }, duration);
      }
    }

    // ê²°ê³¼ í™•ì¸
    function checkResults(results) {
      isSpinning = false;
      
      const key = results.join('');
      let prize = '';
      let icon = 'ğŸ‰';
      let title = 'ì¶•í•˜í•©ë‹ˆë‹¤!';

      if (prizes[key]) {
        // 3ê°œ ëª¨ë‘ ì¼ì¹˜
        prize = prizes[key];
        if (key.includes('ğŸ’') || key.includes('ğŸ°')) {
          icon = 'ğŸ’';
          title = 'JACKPOT!!!';
        }
      } else if (results[0] === results[1] || results[1] === results[2] || results[0] === results[2]) {
        // 2ê°œ ì¼ì¹˜
        prize = '500 í¬ì¸íŠ¸';
      } else {
        // ê½
        prize = 'ì•„ì‰½ê²Œë„ ë‹¤ìŒ ê¸°íšŒì—...';
        icon = 'ğŸ˜¢';
        title = 'ì•„ì‰½ë„¤ìš”!';
      }

      showResult(icon, title, prize);
    }

    // ê²°ê³¼ í‘œì‹œ
    function showResult(icon, title, prize) {
      resultIcon.textContent = icon;
      resultTitle.textContent = title;
      prizeText.textContent = prize;
      resultModal.classList.add('show');
    }

    // ëª¨ë‹¬ ë‹«ê¸°
    function closeModal() {
      resultModal.classList.remove('show');
    }

    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
    lever.addEventListener('click', showAdModal);
    closeBtn.addEventListener('click', closeModal);
    resultModal.addEventListener('click', (e) => {
      if (e.target === resultModal) closeModal();
    });

    // ì´ˆê¸°í™”
    initReels();
  </script>
</body>
</html>

