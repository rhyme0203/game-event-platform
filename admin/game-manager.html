<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ëŸ­í‚¤ë¹¤ì“° - ê²Œì„ ê´€ë¦¬</title>
  <link rel="stylesheet" href="../assets/css/common.css">
  <style>
    .manager-container {
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
    }

    .manager-header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 25px;
      border-radius: 15px;
      margin-bottom: 30px;
      text-align: center;
    }

    .manager-header h1 {
      font-size: 2em;
      margin-bottom: 10px;
    }

    .game-selector {
      display: flex;
      gap: 10px;
      margin-bottom: 30px;
      flex-wrap: wrap;
    }

    .game-tab {
      padding: 12px 25px;
      background: #f8f9fa;
      border: 2px solid #e9ecef;
      border-radius: 25px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 600;
    }

    .game-tab.active {
      background: var(--primary-color);
      color: white;
      border-color: var(--primary-color);
    }

    .game-tab:hover {
      border-color: var(--primary-color);
    }

    .settings-section {
      background: white;
      border-radius: 15px;
      padding: 25px;
      margin-bottom: 20px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
    }

    .settings-section h3 {
      color: var(--primary-color);
      margin-bottom: 20px;
      font-size: 1.3em;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #333;
    }

    .form-group input,
    .form-group select,
    .form-group textarea {
      width: 100%;
      padding: 12px;
      border: 2px solid #e9ecef;
      border-radius: 8px;
      font-size: 1em;
      transition: border-color 0.3s ease;
    }

    .form-group input:focus,
    .form-group select:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: var(--primary-color);
    }

    .prize-list {
      display: grid;
      gap: 15px;
    }

    .prize-item {
      display: grid;
      grid-template-columns: 1fr 100px 100px 80px;
      gap: 15px;
      align-items: center;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 10px;
      border: 2px solid transparent;
      transition: all 0.3s ease;
    }

    .prize-item:hover {
      border-color: var(--primary-color);
    }

    .prize-item input {
      margin: 0;
    }

    .add-prize-btn {
      background: var(--primary-color);
      color: white;
      border: none;
      padding: 12px 25px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .add-prize-btn:hover {
      background: var(--secondary-color);
    }

    .save-btn {
      background: linear-gradient(135deg, #4CAF50, #45a049);
      color: white;
      border: none;
      padding: 15px 30px;
      border-radius: 25px;
      font-size: 1.1em;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      width: 100%;
      margin-top: 20px;
    }

    .save-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(76, 175, 80, 0.4);
    }

    .back-link {
      display: inline-block;
      background: #6c757d;
      color: white;
      padding: 12px 25px;
      border-radius: 25px;
      text-decoration: none;
      font-weight: 600;
      transition: all 0.3s ease;
      margin-bottom: 20px;
    }

    .back-link:hover {
      background: #5a6268;
      transform: translateY(-2px);
    }

    @media (max-width: 768px) {
      .prize-item {
        grid-template-columns: 1fr;
        gap: 10px;
      }
      
      .game-selector {
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <div class="manager-container">
    <a href="index.html" class="back-link">â† ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</a>
    
    <div class="manager-header">
      <h1 id="gameTitle">ê²Œì„ ê´€ë¦¬</h1>
      <p>ê²Œì„ ì„¤ì •ì„ ê´€ë¦¬í•˜ê³  ì¡°ì •í•˜ì„¸ìš”</p>
    </div>

    <!-- ê²Œì„ ì„ íƒ íƒ­ -->
    <div class="game-selector">
      <div class="game-tab active" onclick="switchGame('roulette', this)">ğŸ¡ ë£°ë ›</div>
      <div class="game-tab" onclick="switchGame('slot', this)">ğŸ° ìŠ¬ë¡¯ë¨¸ì‹ </div>
      <div class="game-tab" onclick="switchGame('capsule', this)">ğŸ ìº¡ìŠë½‘ê¸°</div>
      <div class="game-tab" onclick="switchGame('scratch', this)">ğŸ« ìŠ¤í¬ë˜ì¹˜</div>
    </div>

    <!-- ë£°ë › ì„¤ì • -->
    <div id="roulette-settings" class="game-settings">
      <div class="settings-section">
        <h3>ğŸ¡ ë£°ë › ê¸°ë³¸ ì„¤ì •</h3>
        <div class="form-group">
          <label for="roulette-attempts">ë‚¨ì€ ê¸°íšŒ íšŸìˆ˜</label>
          <input type="number" id="roulette-attempts" value="3" min="1" max="10">
        </div>
        <div class="form-group">
          <label for="roulette-spin-duration">íšŒì „ ì‹œê°„ (ì´ˆ)</label>
          <input type="number" id="roulette-spin-duration" value="4" min="2" max="10" step="0.5">
        </div>
      </div>

      <div class="settings-section">
        <h3>ğŸ ê²½í’ˆ ì„¤ì •</h3>
        <div class="prize-list" id="roulette-prizes">
          <div class="prize-item">
            <input type="text" placeholder="ê²½í’ˆëª…" value="1ë“±: ìŠ¤íƒ€ë²…ìŠ¤ ê¸°í”„í‹°ì½˜">
            <input type="number" placeholder="í™•ë¥ %" value="5" min="0" max="100">
            <input type="text" placeholder="ìƒ‰ìƒ" value="#ff6b6b">
            <button onclick="removePrize(this)">ì‚­ì œ</button>
          </div>
          <div class="prize-item">
            <input type="text" placeholder="ê²½í’ˆëª…" value="2ë“±: 5,000 í¬ì¸íŠ¸">
            <input type="number" placeholder="í™•ë¥ %" value="10" min="0" max="100">
            <input type="text" placeholder="ìƒ‰ìƒ" value="#4ecdc4">
            <button onclick="removePrize(this)">ì‚­ì œ</button>
          </div>
          <div class="prize-item">
            <input type="text" placeholder="ê²½í’ˆëª…" value="3ë“±: 3,000 í¬ì¸íŠ¸">
            <input type="number" placeholder="í™•ë¥ %" value="15" min="0" max="100">
            <input type="text" placeholder="ìƒ‰ìƒ" value="#45b7d1">
            <button onclick="removePrize(this)">ì‚­ì œ</button>
          </div>
          <div class="prize-item">
            <input type="text" placeholder="ê²½í’ˆëª…" value="ê½: ë‹¤ìŒ ê¸°íšŒì—">
            <input type="number" placeholder="í™•ë¥ %" value="70" min="0" max="100">
            <input type="text" placeholder="ìƒ‰ìƒ" value="#95a5a6">
            <button onclick="removePrize(this)">ì‚­ì œ</button>
          </div>
        </div>
        <button class="add-prize-btn" onclick="addPrize('roulette')">+ ê²½í’ˆ ì¶”ê°€</button>
      </div>
    </div>

    <!-- ìŠ¬ë¡¯ë¨¸ì‹  ì„¤ì • -->
    <div id="slot-settings" class="game-settings" style="display: none;">
      <div class="settings-section">
        <h3>ğŸ° ìŠ¬ë¡¯ë¨¸ì‹  ê¸°ë³¸ ì„¤ì •</h3>
        <div class="form-group">
          <label for="slot-symbols">ì‹¬ë³¼ ì¢…ë¥˜ (ì‰¼í‘œë¡œ êµ¬ë¶„)</label>
          <input type="text" id="slot-symbols" value="ğŸ’,ğŸ‹,ğŸŠ,â­,ğŸ‡,ğŸ‰,ğŸ’,ğŸ°">
        </div>
        <div class="form-group">
          <label for="slot-spin-duration">íšŒì „ ì‹œê°„ (ì´ˆ)</label>
          <input type="number" id="slot-spin-duration" value="3" min="1" max="10" step="0.5">
        </div>
      </div>

      <div class="settings-section">
        <h3>ğŸ ë‹¹ì²¨ ì¡°í•© ì„¤ì •</h3>
        <div class="prize-list" id="slot-prizes">
          <div class="prize-item">
            <input type="text" placeholder="ì¡°í•© (ì˜ˆ: ğŸ’ğŸ’ğŸ’)" value="ğŸ’ğŸ’ğŸ’">
            <input type="text" placeholder="ë³´ìƒ" value="JACKPOT! 10,000 í¬ì¸íŠ¸">
            <input type="number" placeholder="í™•ë¥ %" value="1" min="0" max="100">
            <button onclick="removePrize(this)">ì‚­ì œ</button>
          </div>
          <div class="prize-item">
            <input type="text" placeholder="ì¡°í•© (ì˜ˆ: ğŸ’ğŸ’ğŸ’)" value="ğŸ’ğŸ’ğŸ’">
            <input type="text" placeholder="ë³´ìƒ" value="5,000 í¬ì¸íŠ¸">
            <input type="number" placeholder="í™•ë¥ %" value="5" min="0" max="100">
            <button onclick="removePrize(this)">ì‚­ì œ</button>
          </div>
        </div>
        <button class="add-prize-btn" onclick="addPrize('slot')">+ ì¡°í•© ì¶”ê°€</button>
      </div>
    </div>

    <!-- ìº¡ìŠë½‘ê¸° ì„¤ì • -->
    <div id="capsule-settings" class="game-settings" style="display: none;">
      <div class="settings-section">
        <h3>ğŸ ìº¡ìŠë½‘ê¸° ê¸°ë³¸ ì„¤ì •</h3>
        <div class="form-group">
          <label for="capsule-count">ìº¡ìŠ ê°œìˆ˜</label>
          <input type="number" id="capsule-count" value="6" min="3" max="12">
        </div>
        <div class="form-group">
          <label for="capsule-animation">ì• ë‹ˆë©”ì´ì…˜ ì‹œê°„ (ì´ˆ)</label>
          <input type="number" id="capsule-animation" value="2" min="1" max="5" step="0.5">
        </div>
      </div>

      <div class="settings-section">
        <h3>ğŸ ê²½í’ˆ ì„¤ì •</h3>
        <div class="prize-list" id="capsule-prizes">
          <div class="prize-item">
            <input type="text" placeholder="ê²½í’ˆëª…" value="1ë“±: 10,000ì› ìƒí’ˆê¶Œ">
            <input type="text" placeholder="ì´ëª¨ì§€" value="ğŸ’">
            <input type="number" placeholder="í™•ë¥ %" value="5" min="0" max="100">
            <button onclick="removePrize(this)">ì‚­ì œ</button>
          </div>
          <div class="prize-item">
            <input type="text" placeholder="ê²½í’ˆëª…" value="2ë“±: 5,000ì› ìƒí’ˆê¶Œ">
            <input type="text" placeholder="ì´ëª¨ì§€" value="ğŸ">
            <input type="number" placeholder="í™•ë¥ %" value="10" min="0" max="100">
            <button onclick="removePrize(this)">ì‚­ì œ</button>
          </div>
        </div>
        <button class="add-prize-btn" onclick="addPrize('capsule')">+ ê²½í’ˆ ì¶”ê°€</button>
      </div>
    </div>

    <!-- ìŠ¤í¬ë˜ì¹˜ ì„¤ì • -->
    <div id="scratch-settings" class="game-settings" style="display: none;">
      <div class="settings-section">
        <h3>ğŸ« ìŠ¤í¬ë˜ì¹˜ ê¸°ë³¸ ì„¤ì •</h3>
        <div class="form-group">
          <label for="scratch-reveal-percent">ìë™ ì™„ë£Œ í¼ì„¼íŠ¸</label>
          <input type="number" id="scratch-reveal-percent" value="70" min="50" max="90">
        </div>
        <div class="form-group">
          <label for="scratch-ad-trigger">ê´‘ê³  í‘œì‹œ í¼ì„¼íŠ¸</label>
          <input type="number" id="scratch-ad-trigger" value="30" min="10" max="50">
        </div>
      </div>

      <div class="settings-section">
        <h3>ğŸ ê²½í’ˆ ì„¤ì •</h3>
        <div class="prize-list" id="scratch-prizes">
          <div class="prize-item">
            <input type="text" placeholder="ê²½í’ˆëª…" value="ëŒ€ë°•! 50,000ì› ìƒí’ˆê¶Œ">
            <input type="text" placeholder="ì´ëª¨ì§€" value="ğŸ’">
            <input type="number" placeholder="í™•ë¥ %" value="1" min="0" max="100">
            <button onclick="removePrize(this)">ì‚­ì œ</button>
          </div>
          <div class="prize-item">
            <input type="text" placeholder="ê²½í’ˆëª…" value="ì¶•í•˜! 10,000ì› ìƒí’ˆê¶Œ">
            <input type="text" placeholder="ì´ëª¨ì§€" value="ğŸ">
            <input type="number" placeholder="í™•ë¥ %" value="5" min="0" max="100">
            <button onclick="removePrize(this)">ì‚­ì œ</button>
          </div>
        </div>
        <button class="add-prize-btn" onclick="addPrize('scratch')">+ ê²½í’ˆ ì¶”ê°€</button>
      </div>
    </div>

    <button class="save-btn" onclick="saveSettings()">ğŸ’¾ ì„¤ì • ì €ì¥</button>
  </div>

  <!-- ë°ì´í„°ë² ì´ìŠ¤ ë° API ìŠ¤í¬ë¦½íŠ¸ -->
  <script src="database.js"></script>
  <script src="api.js"></script>
  
  <script>
    let currentGame = 'roulette';

    // ê²Œì„ ì „í™˜
    function switchGame(gameType, targetElement = null) {
      currentGame = gameType;
      
      // íƒ­ í™œì„±í™”
      document.querySelectorAll('.game-tab').forEach(tab => {
        tab.classList.remove('active');
      });
      
      // targetElementê°€ ìˆìœ¼ë©´ í•´ë‹¹ ìš”ì†Œë¥¼ í™œì„±í™”, ì—†ìœ¼ë©´ gameTypeê³¼ ì¼ì¹˜í•˜ëŠ” íƒ­ì„ ì°¾ì•„ì„œ í™œì„±í™”
      if (targetElement) {
        targetElement.classList.add('active');
      } else {
        const targetTab = document.querySelector(`[onclick*="${gameType}"]`);
        if (targetTab) {
          targetTab.classList.add('active');
        }
      }

      // ì„¤ì • ì„¹ì…˜ ì „í™˜
      document.querySelectorAll('.game-settings').forEach(section => {
        section.style.display = 'none';
      });
      document.getElementById(gameType + '-settings').style.display = 'block';

      // ì œëª© ì—…ë°ì´íŠ¸
      const titles = {
        'roulette': 'ğŸ¡ ë£°ë › ê´€ë¦¬',
        'slot': 'ğŸ° ìŠ¬ë¡¯ë¨¸ì‹  ê´€ë¦¬',
        'capsule': 'ğŸ ìº¡ìŠë½‘ê¸° ê´€ë¦¬',
        'scratch': 'ğŸ« ìŠ¤í¬ë˜ì¹˜ ê´€ë¦¬'
      };
      document.getElementById('gameTitle').textContent = titles[gameType];
      
      // ê²Œì„ ì„¤ì • ë¡œë“œ
      loadGameSettings(gameType);
    }

    // ê²½í’ˆ ì¶”ê°€
    function addPrize(gameType) {
      const prizeList = document.getElementById(gameType + '-prizes');
      const newPrize = document.createElement('div');
      newPrize.className = 'prize-item';
      
      if (gameType === 'roulette') {
        newPrize.innerHTML = `
          <input type="text" placeholder="ê²½í’ˆëª…" value="">
          <input type="number" placeholder="í™•ë¥ %" value="10" min="0" max="100">
          <input type="text" placeholder="ìƒ‰ìƒ" value="#95a5a6">
          <button onclick="removePrize(this)">ì‚­ì œ</button>
        `;
      } else if (gameType === 'slot') {
        newPrize.innerHTML = `
          <input type="text" placeholder="ì¡°í•© (ì˜ˆ: ğŸ’ğŸ’ğŸ’)" value="">
          <input type="text" placeholder="ë³´ìƒ" value="">
          <input type="number" placeholder="í™•ë¥ %" value="5" min="0" max="100">
          <button onclick="removePrize(this)">ì‚­ì œ</button>
        `;
      } else if (gameType === 'capsule') {
        newPrize.innerHTML = `
          <input type="text" placeholder="ê²½í’ˆëª…" value="">
          <input type="text" placeholder="ì´ëª¨ì§€" value="ğŸ">
          <input type="number" placeholder="í™•ë¥ %" value="10" min="0" max="100">
          <button onclick="removePrize(this)">ì‚­ì œ</button>
        `;
      } else if (gameType === 'scratch') {
        newPrize.innerHTML = `
          <input type="text" placeholder="ê²½í’ˆëª…" value="">
          <input type="text" placeholder="ì´ëª¨ì§€" value="ğŸ">
          <input type="number" placeholder="í™•ë¥ %" value="10" min="0" max="100">
          <button onclick="removePrize(this)">ì‚­ì œ</button>
        `;
      }
      
      prizeList.appendChild(newPrize);
    }

    // ê²½í’ˆ ì‚­ì œ
    function removePrize(button) {
      button.parentElement.remove();
    }

    // ê²Œì„ ì„¤ì • ë¡œë“œ
    async function loadGameSettings(gameType) {
      try {
        console.log('ê²Œì„ ì„¤ì • ë¡œë“œ ì‹œì‘:', gameType);
        const response = await window.adminAPI.getGameSettings(gameType);
        console.log('API ì‘ë‹µ:', response);
        if (response.success) {
          const settings = response.data;
          console.log('ì„¤ì • ë°ì´í„°:', settings);
          populateGameSettings(gameType, settings);
        } else {
          console.warn('ê²Œì„ ì„¤ì • ë¡œë“œ ì‹¤íŒ¨:', response.error);
        }
      } catch (error) {
        console.error('ê²Œì„ ì„¤ì • ë¡œë“œ ì‹¤íŒ¨:', error);
      }
    }

    // ê²Œì„ ì„¤ì • í¼ì— ë°ì´í„° ì±„ìš°ê¸°
    function populateGameSettings(gameType, settings) {
      console.log('ê²Œì„ ì„¤ì • í¼ ì±„ìš°ê¸°:', gameType, settings);
      
      if (gameType === 'roulette') {
        const attemptsInput = document.getElementById('roulette-attempts');
        const durationInput = document.getElementById('roulette-spin-duration');
        
        if (attemptsInput) attemptsInput.value = settings.attempts || 3;
        if (durationInput) durationInput.value = settings.spinDuration || 4;
        populatePrizes('roulette', settings.prizes || []);
      } else if (gameType === 'slot') {
        const symbolsInput = document.getElementById('slot-symbols');
        const durationInput = document.getElementById('slot-spin-duration');
        
        if (symbolsInput) symbolsInput.value = (settings.symbols || []).join(',');
        if (durationInput) durationInput.value = settings.spinDuration || 3;
        populatePrizes('slot', settings.combinations || []);
      } else if (gameType === 'capsule') {
        const countInput = document.getElementById('capsule-count');
        const animationInput = document.getElementById('capsule-animation');
        
        if (countInput) countInput.value = settings.capsuleCount || 6;
        if (animationInput) animationInput.value = settings.animationDuration || 2;
        populatePrizes('capsule', settings.prizes || []);
      } else if (gameType === 'scratch') {
        const revealInput = document.getElementById('scratch-reveal-percent');
        const adTriggerInput = document.getElementById('scratch-ad-trigger');
        
        if (revealInput) revealInput.value = settings.revealPercent || 70;
        if (adTriggerInput) adTriggerInput.value = settings.adTrigger || 30;
        populatePrizes('scratch', settings.prizes || []);
      }
    }

    // ê²½í’ˆ ë°ì´í„° í¼ì— ì±„ìš°ê¸°
    function populatePrizes(gameType, prizes) {
      console.log('ê²½í’ˆ ë°ì´í„° í¼ ì±„ìš°ê¸°:', gameType, prizes);
      const prizeList = document.getElementById(gameType + '-prizes');
      
      if (!prizeList) {
        console.error('ê²½í’ˆ ë¦¬ìŠ¤íŠ¸ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤:', gameType + '-prizes');
        return;
      }
      
      prizeList.innerHTML = '';

      prizes.forEach((prize, index) => {
        const prizeItem = document.createElement('div');
        prizeItem.className = 'prize-item';
        
        if (gameType === 'roulette') {
          prizeItem.innerHTML = `
            <input type="text" placeholder="ê²½í’ˆëª…" value="${prize.name || ''}">
            <input type="number" placeholder="í™•ë¥ %" value="${prize.probability || 0}" min="0" max="100">
            <input type="text" placeholder="ìƒ‰ìƒ" value="${prize.color || '#95a5a6'}">
            <button onclick="removePrize(this)">ì‚­ì œ</button>
          `;
        } else if (gameType === 'slot') {
          prizeItem.innerHTML = `
            <input type="text" placeholder="ì¡°í•© (ì˜ˆ: ğŸ’ğŸ’ğŸ’)" value="${prize.pattern || ''}">
            <input type="text" placeholder="ë³´ìƒ" value="${prize.reward || ''}">
            <input type="number" placeholder="í™•ë¥ %" value="${prize.probability || 0}" min="0" max="100">
            <button onclick="removePrize(this)">ì‚­ì œ</button>
          `;
        } else {
          prizeItem.innerHTML = `
            <input type="text" placeholder="ê²½í’ˆëª…" value="${prize.name || ''}">
            <input type="text" placeholder="ì´ëª¨ì§€" value="${prize.emoji || 'ğŸ'}">
            <input type="number" placeholder="í™•ë¥ %" value="${prize.probability || 0}" min="0" max="100">
            <button onclick="removePrize(this)">ì‚­ì œ</button>
          `;
        }
        
        prizeList.appendChild(prizeItem);
      });
    }

    // ì„¤ì • ì €ì¥
    async function saveSettings() {
      try {
        const settings = {
          id: currentGame,
          name: getGameName(currentGame),
          enabled: true,
          lastUpdated: new Date().toISOString()
        };

        // ê²Œì„ë³„ ì„¤ì • ìˆ˜ì§‘
        if (currentGame === 'roulette') {
          settings.attempts = parseInt(document.getElementById('roulette-attempts').value);
          settings.spinDuration = parseFloat(document.getElementById('roulette-spin-duration').value);
          settings.prizes = collectPrizes('roulette');
        } else if (currentGame === 'slot') {
          settings.symbols = document.getElementById('slot-symbols').value.split(',').map(s => s.trim());
          settings.spinDuration = parseFloat(document.getElementById('slot-spin-duration').value);
          settings.combinations = collectPrizes('slot');
        } else if (currentGame === 'capsule') {
          settings.capsuleCount = parseInt(document.getElementById('capsule-count').value);
          settings.animationDuration = parseFloat(document.getElementById('capsule-animation').value);
          settings.prizes = collectPrizes('capsule');
        } else if (currentGame === 'scratch') {
          settings.revealPercent = parseInt(document.getElementById('scratch-reveal-percent').value);
          settings.adTrigger = parseInt(document.getElementById('scratch-ad-trigger').value);
          settings.prizes = collectPrizes('scratch');
        }

        // APIë¥¼ í†µí•´ ì €ì¥
        const response = await window.adminAPI.saveGameSettings(currentGame, settings);
        
        if (response.success) {
          alert(`${getGameName(currentGame)} ì„¤ì •ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!`);
          console.log('ì €ì¥ëœ ì„¤ì •:', settings);
        } else {
          alert('ì„¤ì • ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + response.error);
        }
      } catch (error) {
        console.error('ì„¤ì • ì €ì¥ ì‹¤íŒ¨:', error);
        alert('ì„¤ì • ì €ì¥ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
      }
    }

    // ê²Œì„ ì´ë¦„ ê°€ì ¸ì˜¤ê¸°
    function getGameName(gameType) {
      const names = {
        'roulette': 'ë£°ë ›',
        'slot': 'ìŠ¬ë¡¯ë¨¸ì‹ ',
        'capsule': 'ìº¡ìŠë½‘ê¸°',
        'scratch': 'ìŠ¤í¬ë˜ì¹˜'
      };
      return names[gameType] || gameType;
    }

    // ê²½í’ˆ ë°ì´í„° ìˆ˜ì§‘
    function collectPrizes(gameType) {
      const prizeList = document.getElementById(gameType + '-prizes');
      const prizes = [];
      
      prizeList.querySelectorAll('.prize-item').forEach(item => {
        const inputs = item.querySelectorAll('input');
        if (inputs.length >= 3) {
          const prize = {
            name: inputs[0].value,
            probability: parseInt(inputs[inputs.length - 2].value) || 0
          };
          
          if (gameType === 'roulette') {
            prize.color = inputs[2].value;
          } else if (gameType === 'slot') {
            prize.reward = inputs[1].value;
          } else {
            prize.emoji = inputs[1].value;
          }
          
          prizes.push(prize);
        }
      });
      
      return prizes;
    }

    // URL íŒŒë¼ë¯¸í„°ë¡œ ê²Œì„ íƒ€ì… ì„¤ì •
    window.addEventListener('DOMContentLoaded', function() {
      const urlParams = new URLSearchParams(window.location.search);
      const game = urlParams.get('game');
      if (game && ['roulette', 'slot', 'capsule', 'scratch'].includes(game)) {
        // URL íŒŒë¼ë¯¸í„°ë¡œ ì ‘ê·¼í•œ ê²½ìš° í•´ë‹¹ íƒ­ì„ í™œì„±í™”
        const targetTab = document.querySelector(`[onclick*="${game}"]`);
        switchGame(game, targetTab);
      }
    });
  </script>
</body>
</html>
