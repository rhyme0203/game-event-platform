<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ê´€ë¦¬ì ì—°ë™ ë””ë²„ê¹…</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #f5f5f5;
    }
    .debug-section {
      background: white;
      padding: 20px;
      margin: 10px 0;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .debug-title {
      font-size: 1.2em;
      font-weight: bold;
      margin-bottom: 10px;
      color: #2c3e50;
    }
    .debug-content {
      background: #f8f9fa;
      padding: 10px;
      border-radius: 4px;
      font-family: monospace;
      white-space: pre-wrap;
    }
    .btn {
      background: #3498db;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      margin: 5px;
    }
    .btn:hover {
      background: #2980b9;
    }
  </style>
</head>
<body>
  <h1>ğŸ”§ ê´€ë¦¬ì ì—°ë™ ë””ë²„ê¹…</h1>
  
  <div class="debug-section">
    <div class="debug-title">1. ê´€ë¦¬ì ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœ</div>
    <div class="debug-content" id="dbStatus">ë¡œë”© ì¤‘...</div>
    <button class="btn" onclick="checkDatabase()">ë°ì´í„°ë² ì´ìŠ¤ í™•ì¸</button>
  </div>

  <div class="debug-section">
    <div class="debug-title">2. ë£°ë › ì„¤ì •</div>
    <div class="debug-content" id="rouletteSettings">ë¡œë”© ì¤‘...</div>
    <button class="btn" onclick="checkRouletteSettings()">ë£°ë › ì„¤ì • í™•ì¸</button>
  </div>

  <div class="debug-section">
    <div class="debug-title">3. ì „ì—­ ë³€ìˆ˜ ìƒíƒœ</div>
    <div class="debug-content" id="globalVars">ë¡œë”© ì¤‘...</div>
    <button class="btn" onclick="checkGlobalVars()">ì „ì—­ ë³€ìˆ˜ í™•ì¸</button>
  </div>

  <div class="debug-section">
    <div class="debug-title">4. í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±</div>
    <button class="btn" onclick="createTestData()">í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±</button>
    <button class="btn" onclick="clearData()">ë°ì´í„° ì´ˆê¸°í™”</button>
  </div>

  <div class="debug-section">
    <div class="debug-title">5. ê²Œì„ í…ŒìŠ¤íŠ¸</div>
    <a href="games/roulette.html" class="btn" target="_blank">ë£°ë › ê²Œì„ í…ŒìŠ¤íŠ¸</a>
    <a href="admin/index.html" class="btn" target="_blank">ê´€ë¦¬ì í˜ì´ì§€</a>
  </div>

  <script src="assets/js/admin-integration.js"></script>
  <script>
    // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
    window.addEventListener('DOMContentLoaded', function() {
      console.log('ë””ë²„ê¹… í˜ì´ì§€ ë¡œë“œë¨');
      checkDatabase();
      checkRouletteSettings();
      checkGlobalVars();
    });

    // ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœ í™•ì¸
    function checkDatabase() {
      try {
        const dbData = localStorage.getItem('gameDatabase');
        if (dbData) {
          const parsed = JSON.parse(dbData);
          document.getElementById('dbStatus').textContent = JSON.stringify(parsed, null, 2);
        } else {
          document.getElementById('dbStatus').textContent = 'ë°ì´í„°ë² ì´ìŠ¤ê°€ ì—†ìŠµë‹ˆë‹¤.';
        }
      } catch (error) {
        document.getElementById('dbStatus').textContent = 'ì˜¤ë¥˜: ' + error.message;
      }
    }

    // ë£°ë › ì„¤ì • í™•ì¸
    function checkRouletteSettings() {
      try {
        if (window.adminIntegration) {
          const settings = window.adminIntegration.getGameSettings('roulette');
          document.getElementById('rouletteSettings').textContent = JSON.stringify(settings, null, 2);
        } else {
          document.getElementById('rouletteSettings').textContent = 'ê´€ë¦¬ì í†µí•© ìŠ¤í¬ë¦½íŠ¸ê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.';
        }
      } catch (error) {
        document.getElementById('rouletteSettings').textContent = 'ì˜¤ë¥˜: ' + error.message;
      }
    }

    // ì „ì—­ ë³€ìˆ˜ í™•ì¸
    function checkGlobalVars() {
      const vars = {
        'window.prizeData': window.prizeData,
        'window.maxAttempts': window.maxAttempts,
        'window.spinDuration': window.spinDuration,
        'window.adminIntegration': typeof window.adminIntegration
      };
      document.getElementById('globalVars').textContent = JSON.stringify(vars, null, 2);
    }

    // í…ŒìŠ¤íŠ¸ ë°ì´í„° ìƒì„±
    function createTestData() {
      const testData = {
        games: {
          roulette: {
            id: 'roulette',
            name: 'ë£°ë ›',
            enabled: true,
            attempts: 5,
            spinDuration: 3,
            prizes: [
              { id: 1, name: 'í…ŒìŠ¤íŠ¸ 1ë“±: 10,000ì›', probability: 10, color: '#ff6b6b' },
              { id: 2, name: 'í…ŒìŠ¤íŠ¸ 2ë“±: 5,000ì›', probability: 20, color: '#4ecdc4' },
              { id: 3, name: 'í…ŒìŠ¤íŠ¸ 3ë“±: 1,000ì›', probability: 30, color: '#45b7d1' },
              { id: 4, name: 'ê½', probability: 40, color: '#95a5a6' }
            ],
            lastUpdated: new Date().toISOString()
          }
        },
        statistics: {
          totalUsers: 100,
          todayPlays: 50,
          totalPrizes: 10,
          revenue: 100000,
          lastUpdated: new Date().toISOString()
        }
      };
      
      localStorage.setItem('gameDatabase', JSON.stringify(testData));
      alert('í…ŒìŠ¤íŠ¸ ë°ì´í„°ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!');
      checkDatabase();
    }

    // ë°ì´í„° ì´ˆê¸°í™”
    function clearData() {
      localStorage.removeItem('gameDatabase');
      alert('ë°ì´í„°ê°€ ì´ˆê¸°í™”ë˜ì—ˆìŠµë‹ˆë‹¤!');
      checkDatabase();
    }
  </script>
</body>
</html>
